<!DOCTYPE html>
<html lang="en">
<head>
  <base target="_blank">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Algebra TV & Movies App</title>
  <meta name="robots" content="noindex,nofollow">
  <style>
    :root{
      --bg:#0f0f14;
      --panel:#181824;
      --muted:rgba(255,255,255,0.72);
      --accent: #6f8ef3;
      --glass: rgba(255,255,255,0.04);
      --card: rgba(255,255,255,0.03);
      --fourth-bg: rgba(18,18,28,0.6);
      font-family: Inter, Arial, sans-serif;
    }
    html,body{height:100%;margin:0;background:linear-gradient(180deg,#07070a 0%, #0d0d13 100%);color:#fff;}
    .app { min-height:100vh; display:flex; align-items:flex-start; justify-content:center; padding:28px; box-sizing:border-box; position:relative; overflow:hidden; }
    #particles-js { position:absolute; inset:0; z-index:0; pointer-events:none; opacity:0.38; }
    .panel { width:1100px; max-width:calc(100% - 40px); background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); border-radius: 14px; padding:22px; box-shadow: 0 8px 40px rgba(0,0,0,0.6); position:relative; z-index:2; }
    header{ display:flex; align-items:center; gap:16px; margin-bottom:14px; }
    header h1{margin:0;font-size:20px;letter-spacing:0.2px;font-weight:700;}
    .nav { margin-left:auto; display:flex; gap:10px; }
    .btn { background:var(--card); border:1px solid rgba(255,255,255,0.04); color:#eaeef8; padding:10px 14px; border-radius:10px; cursor:pointer; font-weight:600; }
    .btn.ghost { background:transparent; border:1px solid rgba(255,255,255,0.06); }
    .btn.primary { background: linear-gradient(90deg,#4f7bff,#8b6cf6); color:white; box-shadow:0 6px 18px rgba(79,123,255,0.12); }
    .home { display:flex; gap:18px; align-items:center; justify-content:center; padding:40px 20px; }
    .home .card { width:300px; height:160px; border-radius:12px; display:flex; align-items:center; justify-content:center; gap:10px; flex-direction:column; cursor:pointer; transition:transform .15s ease, box-shadow .15s; background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); border:1px solid rgba(255,255,255,0.03); }
    .home .card:hover { transform:translateY(-6px); box-shadow:0 20px 40px rgba(0,0,0,0.6); }
    .controls { display:flex; gap:12px; align-items:center; margin-bottom:16px; }
    .search-input { padding:10px 14px; border-radius:12px; border:none; background:rgba(255,255,255,0.03); color:var(--muted); width:420px; font-size:15px; outline:none; }
    .grid { display:grid; grid-template-columns: repeat(auto-fill, minmax(180px, 1fr)); gap:18px; }
    .card-item { height:280px; border-radius:10px; overflow:hidden; position:relative; cursor:pointer; background-size:cover; background-position:center; transition:transform .12s; display:flex; align-items:flex-end; }
    .card-item:hover { transform:scale(1.02); }
    .card-overlay { width:100%; padding:12px; background:linear-gradient(0deg, rgba(0,0,0,0.62), rgba(0,0,0,0.2)); box-sizing:border-box; }
    .card-overlay h3 { margin:0; font-size:15px; font-weight:700; }
    .muted { color:rgba(255,255,255,0.7); font-size:13px; margin-top:6px; }

    /* Player & Shield */
    .player-wrapper { position:relative; height:70vh; border-radius:12px; overflow:hidden; background:#000; }
    .player-iframe { width:100%; height:100%; border:0; display:block; }
    #player-shield {
      position: absolute;
      top: 0; left: 0;
      width: 100%; height: 100%;
      z-index: 50;
      cursor: pointer;
      background: rgba(0,0,0,0.01);
      display: flex;
      align-items: center;
      justify-content:center;
    }
    #player-shield:hover { background: rgba(255,255,255,0.03); }

    /* Modal */
    #selector-overlay { position:fixed; inset:0; background:rgba(0,0,0,0.6); display:none; align-items:center; justify-content:center; z-index:60; }
    #selector-overlay .modal { width:820px; max-width:94%; height:460px; background:var(--fourth-bg); border-radius:14px; display:flex; overflow:hidden; border:1px solid rgba(255,255,255,0.06); }
    .season-sidebar { width:36%; border-right:1px solid rgba(255,255,255,0.03); padding:12px; overflow:auto; }
    .episode-section { width:64%; padding:12px; overflow:auto; }
    .season-list li, .episode-list li { list-style:none; padding:10px; border-radius:8px; margin-bottom:8px; background:rgba(255,255,255,0.02); cursor:pointer; font-weight:600; }
    .season-list li.selected{ background:rgba(255,255,255,0.06); }
    .close-modal { position:absolute; right:14px; top:10px; background:transparent; border:none; font-size:26px; color:#fff; cursor:pointer; }
    footer { margin-top:14px; color:rgba(255,255,255,0.4); font-size:13px; text-align:center; }
    @media (max-width:780px){ .search-input { width:200px; } .panel { padding:14px; } .card-item{ height:220px;} }
  </style>
</head>
<body>
  <div id="particles-js"></div>

  <div class="app">
    <div class="panel" role="main">
      <header>
        <h1>Algebra TV & Movies</h1>
        <div class="nav">
          <button class="btn" id="homeBtn">Home</button>
          <button class="btn" id="moviesBtn">Movies</button>
          <button class="btn" id="tvBtn">TV Shows</button>
        </div>
      </header>

      <main id="views">
        <section id="view-home" class="view" style="display:block;">
          <div class="home">
            <div class="card" id="goMovies">
              <svg width="36" height="36" viewBox="0 0 24 24" fill="none"><path d="M3 7h18M3 17h18" stroke="white" stroke-width="1.6" stroke-linecap="round"></path></svg>
              <div style="text-align:center;">
                <div style="font-weight:800;font-size:18px">Movies</div>
                <div class="muted" style="margin-top:6px">Browse popular & search</div>
              </div>
            </div>
            <div class="card" id="goTV">
              <svg width="36" height="36" viewBox="0 0 24 24" fill="none"><path d="M4 7h16v10H4z" stroke="white" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"></path></svg>
              <div style="text-align:center;">
                <div style="font-weight:800;font-size:18px">TV Shows</div>
                <div class="muted" style="margin-top:6px">Browse popular & search</div>
              </div>
            </div>
          </div>
        </section>

        <section id="view-movies" class="view" style="display:none;">
          <div class="controls">
            <input id="movieSearch" class="search-input" placeholder="Search movies and press Enter">
            <button class="btn ghost" id="moviesPopularBtn">Popular</button>
          </div>
          <div id="moviesGrid" class="grid"></div>
        </section>

        <section id="view-tv" class="view" style="display:none;">
          <div class="controls">
            <input id="tvSearch" class="search-input" placeholder="Search TV shows and press Enter">
            <button class="btn ghost" id="tvPopularBtn">Popular</button>
          </div>
          <div id="tvGrid" class="grid"></div>
        </section>

        <section id="view-player" class="view" style="display:none;">
          <div style="display:flex;gap:12px;align-items:center;margin-bottom:10px;">
            <button class="btn" id="backToList">Back</button>
            <div id="playerInfo" style="flex:1"></div>
            <div style="display:flex;gap:8px;align-items:center;">
              <label style="font-size:13px;color:rgba(255,255,255,0.8)">Source</label>
              <select id="playerSource"></select>
            </div>
          </div>
          <div class="player-wrapper" id="playerWrapper">
            <div id="player-shield">
                <span style="opacity:0.5; font-size: 12px;">Click once to unlock player</span>
            </div>
            <iframe id="playerFrame" class="player-iframe" src="about:blank" allowfullscreen allow="autoplay; fullscreen" sandbox="allow-forms allow-pointer-lock allow-same-origin allow-scripts allow-presentation"></iframe>
          </div>
        </section>
      </main>
      <footer>Built into one file · TMDB-powered - fixed up and edited a bit by hazza</footer>
    </div>
  </div>

  <div id="selector-overlay" aria-hidden="true">
    <div class="modal">
      <div class="season-sidebar">
        <div style="font-weight:800;font-size:18px;margin-bottom:8px" id="modalShowName">Show</div>
        <ul class="season-list" id="modalSeasonList"></ul>
      </div>
      <div class="episode-section">
        <div style="display:flex;align-items:center;justify-content:space-between;">
          <div style="font-weight:700;font-size:16px" id="modalEpisodeTitle">Select a season</div>
          <button class="btn ghost close-modal" id="modalCloseBtn">×</button>
        </div>
        <ul class="episode-list" id="modalEpisodeList" style="margin-top:12px;"></ul>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>
  <script>
    const movSec = "2713804610e1e236b1cf44bfac3a7776";
    const SOURCES = [
      {"id":"autoembed","name":"AutoEmbed (recommended)","urls":{"movie":"https://player.autoembed.cc/embed/movie/{id}","tv":"https://player.autoembed.cc/embed/tv/{id}/{season}/{episode}"}},
      {"id":"vidlink","name":"VidLink (Stable)","urls":{"movie":"https://vidlink.pro/movie/{id}","tv":"https://vidlink.pro/tv/{id}/{season}/{episode}"}},
      {"id":"vidfast","name":"VidFast (4K)","urls":{"movie":"https://vidfast.pro/movie/{id}","tv":"https://vidfast.pro/tv/{id}/{season}/{episode}"}},
      {"id":"vidsrccc","name":"VidSrcCC","urls":{"movie":"https://vidsrc.cc/v2/embed/movie/{id}?autoPlay=false","tv":"https://vidsrc.cc/v2/embed/tv/{id}/{season}/{episode}?autoPlay=false"}},
      {"id":"pstream","name":"P-Stream","urls":{"movie":"https://iframe.pstream.mov/media/tmdb-movie-{id}","tv":"https://iframe.pstream.mov/media/tmdb-tv-{id}/{season}/{episode}"}}
    ];

    const el = id => document.getElementById(id);
    const views = { home: el('view-home'), movies: el('view-movies'), tv: el('view-tv'), player: el('view-player') };
    let currentPlaying = { type: null, id: null, season: null, episode: null, title: null };

    function showView(name) {
      Object.values(views).forEach(v => v.style.display = 'none');
      views[name].style.display = 'block';
      window.scrollTo({top:0,behavior:'instant'});
    }

    // Nav
    el('homeBtn').onclick = () => showView('home');
    el('moviesBtn').onclick = () => { showView('movies'); getPopularMovies(); };
    el('tvBtn').onclick = () => { showView('tv'); getPopularTV(); };
    el('goMovies').onclick = () => { showView('movies'); getPopularMovies(); };
    el('goTV').onclick = () => { showView('tv'); getPopularTV(); };

    // Shield Logic
    const shield = el('player-shield');
    shield.onclick = () => {
      shield.style.display = 'none';
    };

    async function getPopularMovies(){
      el('moviesGrid').innerHTML = '<div class="muted">Loading...</div>';
      const res = await fetch(`https://api.themoviedb.org/3/movie/popular?api_key=${movSec}&language=en-US&page=1`);
      const json = await res.json();
      displayList(json.results, 'moviesGrid', true);
    }
    async function getPopularTV(){
      el('tvGrid').innerHTML = '<div class="muted">Loading...</div>';
      const res = await fetch(`https://api.themoviedb.org/3/tv/popular?api_key=${movSec}&language=en-US&page=1`);
      const json = await res.json();
      displayList(json.results, 'tvGrid', false);
    }

    function displayList(list, gridId, isMovie){
      const grid = el(gridId);
      grid.innerHTML = '';
      list.forEach(item=>{
        const d = document.createElement('div');
        d.className = 'card-item';
        const poster = item.poster_path || item.backdrop_path || '';
        d.style.backgroundImage = poster ? `url(https://image.tmdb.org/t/p/w500${poster})` : `linear-gradient(180deg,#222,#111)`;
        d.innerHTML = `<div class="card-overlay"><h3>${escapeHtml(item.title||item.name)}</h3></div>`;
        d.onclick = isMovie ? () => openMoviePlayer(item.id, item.title) : () => fetchSeasons(item);
        grid.appendChild(d);
      });
    }

    async function fetchSeasons(show){
      const res = await fetch(`https://api.themoviedb.org/3/tv/${show.id}?api_key=${movSec}`);
      const data = await res.json();
      openSeasonModal(show, data.seasons);
    }

    function openMoviePlayer(id, title){
      currentPlaying = { type:'movie', id: String(id), title: title };
      showView('player');
      shield.style.display = 'flex';
      el('playerInfo').innerHTML = `<b>${title}</b>`;
      embedCurrent();
    }

    function openTVPlayer(id, season, episode, title){
      currentPlaying = { type:'tv', id: String(id), season: String(season), episode: String(episode), title: title };
      showView('player');
      shield.style.display = 'flex';
      el('playerInfo').innerHTML = `<b>${title}</b> - S${season} E${episode}`;
      embedCurrent();
    }

    function embedCurrent(){
      const srcId = el('playerSource').value;
      const srcObj = SOURCES.find(s=>s.id===srcId) || SOURCES[0];
      let url = currentPlaying.type === 'movie' 
        ? srcObj.urls.movie.replace('{id}', currentPlaying.id) 
        : srcObj.urls.tv.replace('{id}', currentPlaying.id).replace('{season}', currentPlaying.season).replace('{episode}', currentPlaying.episode);
      el('playerFrame').src = url;
    }

    function openSeasonModal(show, seasons){
      el('modalSeasonList').innerHTML = '';
      el('modalShowName').textContent = show.name;
      seasons.forEach(s=>{
        if(s.season_number === 0) return;
        const li = document.createElement('li');
        li.textContent = `Season ${s.season_number}`;
        li.onclick = async () => {
          const res = await fetch(`https://api.themoviedb.org/3/tv/${show.id}/season/${s.season_number}?api_key=${movSec}`);
          const data = await res.json();
          showEpisodes(show, s.season_number, data.episodes);
        };
        el('modalSeasonList').appendChild(li);
      });
      el('selector-overlay').style.display = 'flex';
    }

    function showEpisodes(show, sNum, episodes){
      el('modalEpisodeList').innerHTML = '';
      episodes.forEach(ep=>{
        const li = document.createElement('li');
        li.textContent = `E${ep.episode_number}: ${ep.name}`;
        li.onclick = () => {
          el('selector-overlay').style.display = 'none';
          openTVPlayer(show.id, sNum, ep.episode_number, show.name);
        };
        el('modalEpisodeList').appendChild(li);
      });
    }

    // Init Sources
    const sel = el('playerSource');
    SOURCES.forEach(s=>{ const o=document.createElement('option'); o.value=s.id; o.textContent=s.name; sel.appendChild(o); });
    sel.onchange = embedCurrent;
    el('backToList').onclick = () => { el('playerFrame').src = 'about:blank'; showView(currentPlaying.type==='movie'?'movies':'tv'); };
    el('modalCloseBtn').onclick = () => el('selector-overlay').style.display = 'none';

    function escapeHtml(s){ return s ? String(s).replace(/[&<>"']/g, c=>({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[c])) : ''; }

    particlesJS('particles-js', {"particles":{"number":{"value":50},"opacity":{"value":0.1},"size":{"value":3},"move":{"enable":true,"speed":1}}});
  </script>
</body>
</html>
